<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPMN Diagrammer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            emailjs.init("YOUR_USER_ID"); // Sett inn din EmailJS bruker-ID her
        })();
    </script>
    <style>
        body {
            display: flex;
            font-family: Arial, sans-serif;
        }
        #file-structure {
            width: 20%;
            border-right: 1px solid #ccc;
            padding: 10px;
        }
        #diagram {
            width: 60%;
            padding: 10px;
        }
        #pdf-viewer {
            width: 20%;
            padding: 10px;
        }
        iframe {
            width: 100%;
            height: 500px; /* Juster høyden etter behov */
            border: none;
        }
        ul {
            list-style-type: none; /* Fjerner punktmerking */
            padding-left: 0; /* Fjerner innrykk */
        }
        a {
            text-decoration: none; /* Fjerner understrekning */
            color: gray; /* Setter farge på lenken til grå */
            font-weight: bold; /* Gjør teksten fet */
            display: flex; /* Får lenken til å oppføre seg som en blokk */
            align-items: center; /* Vertikal justering av innholdet */
            padding: 5px; /* Legger til litt padding */
            border: 1px solid transparent; /* Legger til en usynlig kant */
            border-radius: 4px; /* Runde kanter */
            margin-bottom: 5px; /* Litt avstand mellom lenkene */
        }
        a:hover {
            background-color: #f0f0f0; /* Endrer bakgrunn ved hover */
            border-color: #007bff; /* Endrer kantfarge ved hover */
        }
        .folder-icon {
            margin-right: 8px; /* Avstand mellom ikon og tekst */
        }
        #feedback-form {
            display: none; /* Skjuler skjemaet som standard */
            position: fixed; /* Fikser posisjonen til skjemaet */
            left: 50%; /* Sentrerer skjemaet horisontalt */
            top: 50%; /* Sentrerer skjemaet vertikalt */
            transform: translate(-50%, -50%); /* Justerer for å være midt i skjermen */
            background-color: white; /* Bakgrunnsfarge */
            border: 1px solid #ccc; /* Kantlinje */
            border-radius: 8px; /* Runde kanter */
            padding: 20px; /* Padding for innholdet */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Skyggeeffekt */
            z-index: 1000; /* Sørger for at skjemaet er over andre elementer */
        }
        #overlay {
            display: none; /* Skjuler overlay som standard */
            position: fixed; /* Fikser posisjonen til overlayet */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Halvtransparent svart bakgrunn */
            z-index: 999; /* Sørger for at overlayet er over andre elementer */
        }
    </style>
</head>
<body>

    <div id="file-structure">
        <h3>Filer</h3>
        <ul>
            <li><strong>E2E Prosesser</strong>
                <ul>
                    <li><a href="E2E%20prosesser/E2E%20Vedlikehold.html" target="diagram-frame">E2E Vedlikehold</a></li>
                    <li><a href="E2E%20prosesser/E2E%20Drift.html" target="diagram-frame">E2E Drift</a></li>
                </ul>
            </li>
            <li><strong>Vedlikehold</strong>
                <ul>
                    <li><a href="vedlikehold/OM200.001_opprette_notifikasjon.html" target="diagram-frame"><i class="fas fa-folder folder-icon"></i>OM200.001 - Opprette Notifikasjon</a></li>
                    <li><a href="vedlikehold/OM200.002_oppdatere_vedlikeholdsplan.html" target="diagram-frame"><i class="fas fa-folder folder-icon"></i>OM200.002 - Oppdatere Vedlikeholdsplan</a></li>
                </ul>
            </li>
            <li><strong>Drift</strong>
                <ul>
                    <li><a href="drift/OM300.001_oppstart_hydroforanlegget.html" target="diagram-frame"><i class="fas fa-folder folder-icon"></i>OM300.001 - Oppstart Hydroforanlegget</a></li>
                    <li><a href="drift/OM300.002_stenge_hydroforanlegget.html" target="diagram-frame"><i class="fas fa-folder folder-icon"></i>OM300.002 - Stenge Hydroforanlegget</a></li>
                </ul>
            </li>
            <li><strong>PDF Filer</strong>
                <ul>
                    <li><a href="pdf-filer/SOP_Dokument_1.pdf" target="pdf-frame"><i class="fas fa-file-pdf folder-icon"></i>SOP Dokument 1</a></li>
                    <li><a href="pdf-filer/SOP_Dokument_2.pdf" target="pdf-frame"><i class="fas fa-file-pdf folder-icon"></i>SOP Dokument 2</a></li>
                </ul>
            </li>
            <li><strong>BPMN Dashbord</strong>
                <ul>
                    <li><a href="Bpmn_dashbord/dashbord_1.html" target="_blank"><i class="fas fa-folder folder-icon"></i>Dashbord 1</a></li>
                    <li><a href="Bpmn_dashbord/dashbord_2.html" target="_blank"><i class="fas fa-folder folder-icon"></i>Dashbord 2</a></li>
                </ul>
            </li>
        </ul>
        <button onclick="toggleFeedbackForm()" style="background: none; border: none; color: gray; font-weight: bold; cursor: pointer;">Gi Tilbakemelding</button>
    </div>

    <div id="diagram">
        <h3>BPMN Diagram</h3>
        <iframe name="diagram-frame" src="path/to/your/default_diagram.html"></iframe>
    </div>

    <div id="pdf-viewer">
        <h3>PDF Visning</h3>
        <iframe name="pdf-frame" src=""></iframe>
    </div>

    <!-- Overlay for the feedback form -->
    <div id="overlay" onclick="toggleFeedbackForm()"></div>

    <div id="feedback-form">
        <h3>Tilbakemelding</h3>
        <form id="myForm">
            <label for="processNumber">Nummer på prosess:</label><br>
            <input type="text" id="processNumber" name="processNumber" required><br><br>
            
            <label for="who">Hvem:</label><br>
            <input type="text" id="who" name="who" required><br><br>
            
            <label for="message">Tilbakemelding (maks 200 ord):</label><br>
            <textarea id="message" name="message" rows="4" maxlength="200" required></textarea><br><br>
            
            <button type="submit">Send Tilbakemelding</button>
        </form>
    </div>

    <script>
        document.getElementById("myForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Forhindre standard innsending
            
            const processNumber = document.getElementById("processNumber").value;
            const who = document.getElementById("who").value;
            const message = document.getElementById("message").value;

            // Send e-post
            emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
                processNumber: processNumber,
                who: who,
                message: message
            })
            .then(function(response) {
                alert("Tilbakemelding sendt!"); // Bekreftelse til brukeren
            }, function(error) {
                alert("Det oppstod en feil: " + JSON.stringify(error));
            });

            // Tøm skjemaet etter innsending
            document.getElementById("myForm").reset();
        });

        // Funksjon for å vise eller skjule skjemaet
        function toggleFeedbackForm() {
            const form = document.getElementById("feedback-form");
            const overlay = document.getElementById("overlay");
            const isVisible = form.style.display === "block";
            form.style.display = isVisible ? "none" : "block";
            overlay.style.display = isVisible ? "none" : "block"; // Vis/skjul overlay
        }
    </script>

</body>
</html>
